(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{149:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(3),i=n(7),a=(n(0),n(206)),o={title:"Specifying Multiple Admins"},l={unversionedId:"tasks/multiple-cluster-admins",id:"version-2.5.0/tasks/multiple-cluster-admins",isDocsHomePage:!1,title:"Specifying Multiple Admins",description:"A WKP cluster can be operated by multiple adminstrators, given that they have the same version of the wk binary installed, and they have read and write permissions to the cluster repository.",source:"@site/versioned_docs/version-2.5.0/tasks/multiple-cluster-admins.md",slug:"/tasks/multiple-cluster-admins",permalink:"/docs/tasks/multiple-cluster-admins",editUrl:"https://github.com/weaveworks/wkp-docs/tree/main/versioned_docs/version-2.5.0/tasks/multiple-cluster-admins.md",version:"2.5.0",sidebar:"version-2.5.0/docs",previous:{title:"Configuring EKS-D",permalink:"/docs/tasks/using-the-eks-d-distribution"},next:{title:"Patching Node OS packages",permalink:"/docs/tasks/patching-node-os-packages"}},s=[],c={toc:s};function p(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"A WKP cluster can be operated by multiple adminstrators, given that they have the same version of the ",Object(a.b)("inlineCode",{parentName:"p"},"wk")," binary installed, and they have read and write permissions to the cluster repository."),Object(a.b)("p",null,"There are certain files, created during the cluster bootstrapping, that are not pushed to the remote repository, and therefore not accessible to other administrators.\nA full list of non-committed files that affect operations follows:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"The generated ",Object(a.b)("inlineCode",{parentName:"li"},"KUBECONFIG")," for the cluster"),Object(a.b)("li",{parentName:"ul"},"The ssh private key file set in the ",Object(a.b)("inlineCode",{parentName:"li"},"sshKeyFile")," field of ",Object(a.b)("inlineCode",{parentName:"li"},"setup/config.yaml")),Object(a.b)("li",{parentName:"ul"},"The file containing the docker.io password, set in ",Object(a.b)("inlineCode",{parentName:"li"},"dockerIOPasswordFile")),Object(a.b)("li",{parentName:"ul"},"The deploy key pair of the git repository ",Object(a.b)("inlineCode",{parentName:"li"},"setup/repo-key-<cluster-name>[.pub]")),Object(a.b)("li",{parentName:"ul"},"The sealed secrets private key ",Object(a.b)("inlineCode",{parentName:"li"},"setup/sealed-secrets-key")),Object(a.b)("li",{parentName:"ul"},"The binaries contained in the ",Object(a.b)("inlineCode",{parentName:"li"},"bin")," directory")),Object(a.b)("p",null,"While some operations can still be performed with the above missing, specifically:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Adding and removing nodes, by editing the ",Object(a.b)("inlineCode",{parentName:"li"},"setup/machines.yaml")," file"),Object(a.b)("li",{parentName:"ul"},"Deploying workloads by commiting manifests in the ",Object(a.b)("inlineCode",{parentName:"li"},"cluster/manifests")," directory.")),Object(a.b)("p",null,"To query the status of pods and the results of operations, a ",Object(a.b)("inlineCode",{parentName:"p"},"KUBECONFIG")," file will need to be\nregenerated for the new environment. To generate the new ",Object(a.b)("inlineCode",{parentName:"p"},"KUBECONFIG"),", the following files will need to be shared from the original machine:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"The ssh key file in the ",Object(a.b)("inlineCode",{parentName:"li"},"sshKeyFile")," field of ",Object(a.b)("inlineCode",{parentName:"li"},"setup/config.yaml")),Object(a.b)("li",{parentName:"ul"},"The file containing the docker.io password, set in ",Object(a.b)("inlineCode",{parentName:"li"},"dockerIOPasswordFile"))),Object(a.b)("p",null,"Once the files are in place, generate the ",Object(a.b)("inlineCode",{parentName:"p"},"KUBECONFIG")," with:"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"wk kubeconfig --cluster=<path-to-cluster.yaml> --machines=<path-to-machines.yaml> --ssh-key=<path-to-ssh-key>")),Object(a.b)("p",null,"At this point an administrator can run any post-installation operation on the WKP cluster from the new machine, as described in sections:"),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"/docs/cluster-operations/upgrading-kubernetes-version"},"Cluster Operations"),"\\\n",Object(a.b)("a",{parentName:"p",href:"/docs/cluster-operations/user-workloads"},"Running User Workloads")))}p.isMDXComponent=!0},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(0),i=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=i.a.createContext({}),p=function(e){var t=i.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,m=u["".concat(o,".").concat(d)]||u[d]||b[d]||a;return n?i.a.createElement(m,l(l({ref:t},c),{},{components:n})):i.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);