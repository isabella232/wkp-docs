<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="WKP Technical Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="WKP Technical Documentation Blog Atom Feed"><title data-react-helmet="true">Existing clusters | WKP Technical Documentation</title><meta data-react-helmet="true" property="og:url" content="https://weaveworks.github.io/wkp-docs//docs/next/mccp/existing-clusters"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Existing clusters | WKP Technical Documentation"><meta data-react-helmet="true" name="description" content="How to: Connect a cluster {how-to-connect-a-cluster}"><meta data-react-helmet="true" property="og:description" content="How to: Connect a cluster {how-to-connect-a-cluster}"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon_150px.png"><link data-react-helmet="true" rel="canonical" href="https://weaveworks.github.io/wkp-docs//docs/next/mccp/existing-clusters"><link data-react-helmet="true" rel="alternate" href="https://weaveworks.github.io/wkp-docs//docs/next/mccp/existing-clusters" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://weaveworks.github.io/wkp-docs//docs/next/mccp/existing-clusters" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.68a53ba0.css">
<link rel="preload" href="/assets/js/styles.08d3484e.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.db510b37.js" as="script">
<link rel="preload" href="/assets/js/main.e9cab326.js" as="script">
<link rel="preload" href="/assets/js/1.1fbda8f8.js" as="script">
<link rel="preload" href="/assets/js/2.9ce78126.js" as="script">
<link rel="preload" href="/assets/js/3.1c265131.js" as="script">
<link rel="preload" href="/assets/js/1be78505.0b0b4814.js" as="script">
<link rel="preload" href="/assets/js/146.da5cea56.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.393c7b5c.js" as="script">
<link rel="preload" href="/assets/js/17896441.fe26a0d5.js" as="script">
<link rel="preload" href="/assets/js/a3ab6468.95e17395.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">WKP Docs</strong></a><a class="navbar__item navbar__link" href="/docs/next/">WKP</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/next/mccp/intro">Multi-Cluster Control Plane</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/next/download">WKP Downloads</a><a class="navbar__item navbar__link" href="/docs/next/release-notes">Release Notes</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/docs/next/">main</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/mccp/existing-clusters">main</a></li><li><a class="dropdown__link" href="/docs/">2.5.0</a></li><li><a class="dropdown__link" href="/docs/2.4.2/">2.4.2</a></li></ul></div><a href="https://github.com/weaveworks/wkp-docs/tree/main" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">WKP Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/">WKP</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/next/mccp/intro">Multi-Cluster Control Plane</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/download">WKP Downloads</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/release-notes">Release Notes</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/next/mccp/existing-clusters">main</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/">2.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/2.4.2/">2.4.2</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/weaveworks/wkp-docs/tree/main" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/mccp/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/next/mccp/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Usage Guide</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/next/mccp/existing-clusters">Existing clusters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/mccp/cluster-api-providers">Cluster API Providers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/mccp/templates">CAPI Templates</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">MCCP CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/mccp/cli-templates">Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/mccp/cli-clusters">Clusters</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for WKP Technical Documentation <strong>main</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/docs/">latest version</a></strong> (2.5.0).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: main</span></div><header><h1 class="docTitle_3a4h">Existing clusters</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-connect-a-cluster"></a>How to: Connect a cluster<a class="hash-link" href="#how-to-connect-a-cluster" title="Direct link to heading">#</a></h2><p>To connect a cluster to the multi-cluster control plane (MCCP), first navigate to the <code>Clusters</code> section of the WKP UI and click on the <code>Connect a cluster</code> button. You will then be presented with a form to add the details of the leaf cluster being connected.</p><ul><li>Name: this is the name of the leaf cluster. This is a required field.</li><li>Ingress URL: this is the publicly accessible HTTP(S) endpoint of the leaf cluster. This is an optional field.</li></ul><p>Click on the <code>Save &amp; next</code> button to persist these details. You will then be presented with a <code>kubectl</code> command that you can run to install an agent on your leaf cluster. The agent is responsible for inspecting the leaf cluster and sending back leaf information to the MCCP server. It will not make any changes to your cluster.</p><p>Ensure that your current kubeconfig context is setup to use the leaf cluster. Then copy the command and run it.</p><p>After a few seconds, the status of your cluster should change to <code>Connected (Ready)</code> which indicates that the leaf cluster has been successfully connected.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-update-a-cluster"></a>How to: Update a cluster<a class="hash-link" href="#how-to-update-a-cluster" title="Direct link to heading">#</a></h2><p>To update a cluster, click on the rightmost icon of that cluster&#x27;s row. You will be presented with a form that allows you to update its name and ingress URL. Finally click on the <code>Save &amp; next</code> button to persist these changes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-disconnect-and-remove-a-cluster"></a>How to: Disconnect and remove a cluster<a class="hash-link" href="#how-to-disconnect-and-remove-a-cluster" title="Direct link to heading">#</a></h2><p>To disconnect a cluster open the config dialog with the ðŸ›  button on the cluster&#x27;s row.</p><p>The <em>Disconnect</em> tab shows instructions on how to remove the wkp-agent from your leaf cluster.</p><p>Once the agent has been removed its status will change from &quot;Connected&quot; to <em>Last seen</em>. Click <em>Remove cluster from the MCCP</em> to remove the cluster and the meta-data that&#x27;s been collected.</p><p>To re-connect the cluster again follow the <em>Connect a cluster</em> instructions above.</p><p><img alt="Disconnect cluster" src="/assets/images/disconnect-cluster-fa4a34617b18ae909507952f5f586848.png"></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/weaveworks/wkp-docs/tree/main/docs/mccp/existing-clusters.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/next/mccp/installation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/next/mccp/cluster-api-providers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cluster API Providers Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-connect-a-cluster" class="table-of-contents__link">How to: Connect a cluster</a></li><li><a href="#how-to-update-a-cluster" class="table-of-contents__link">How to: Update a cluster</a></li><li><a href="#how-to-disconnect-and-remove-a-cluster" class="table-of-contents__link">How to: Disconnect and remove a cluster</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Support</h4><ul class="footer__items"><li class="footer__item"><a href="mailto:support@weave.works" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Weaveworks</div></div></div></footer></div>
<script src="/assets/js/styles.08d3484e.js"></script>
<script src="/assets/js/runtime~main.db510b37.js"></script>
<script src="/assets/js/main.e9cab326.js"></script>
<script src="/assets/js/1.1fbda8f8.js"></script>
<script src="/assets/js/2.9ce78126.js"></script>
<script src="/assets/js/3.1c265131.js"></script>
<script src="/assets/js/1be78505.0b0b4814.js"></script>
<script src="/assets/js/146.da5cea56.js"></script>
<script src="/assets/js/935f2afb.393c7b5c.js"></script>
<script src="/assets/js/17896441.fe26a0d5.js"></script>
<script src="/assets/js/a3ab6468.95e17395.js"></script>
</body>
</html>