<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/wkp/blog/rss.xml" title="WKP Technical Documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/wkp/blog/atom.xml" title="WKP Technical Documentation Blog Atom Feed"><title data-react-helmet="true">Known Issues and Work Arounds | WKP Technical Documentation</title><meta data-react-helmet="true" property="og:url" content="https://weaveworks.github.io/wkp-docs//wkp/docs/next/getting-started/known-issues"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Known Issues and Work Arounds | WKP Technical Documentation"><meta data-react-helmet="true" name="description" content="- Cluster creation with Kubernetes 1.16.1 fails. Avoid creating clusters on 1.16.1 and use a later version instead."><meta data-react-helmet="true" property="og:description" content="- Cluster creation with Kubernetes 1.16.1 fails. Avoid creating clusters on 1.16.1 and use a later version instead."><link data-react-helmet="true" rel="shortcut icon" href="/wkp/img/favicon_150px.png"><link data-react-helmet="true" rel="canonical" href="https://weaveworks.github.io/wkp-docs//wkp/docs/next/getting-started/known-issues"><link data-react-helmet="true" rel="alternate" href="https://weaveworks.github.io/wkp-docs//wkp/docs/next/getting-started/known-issues" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://weaveworks.github.io/wkp-docs//wkp/docs/next/getting-started/known-issues" hreflang="x-default"><link rel="stylesheet" href="/wkp/assets/css/styles.7e876baf.css">
<link rel="preload" href="/wkp/assets/js/styles.abc77443.js" as="script">
<link rel="preload" href="/wkp/assets/js/runtime~main.1ecede88.js" as="script">
<link rel="preload" href="/wkp/assets/js/main.d34c52c6.js" as="script">
<link rel="preload" href="/wkp/assets/js/1.7b0384ce.js" as="script">
<link rel="preload" href="/wkp/assets/js/2.e71b656c.js" as="script">
<link rel="preload" href="/wkp/assets/js/98.cac1137d.js" as="script">
<link rel="preload" href="/wkp/assets/js/100.a80eb3bc.js" as="script">
<link rel="preload" href="/wkp/assets/js/935f2afb.d09144ed.js" as="script">
<link rel="preload" href="/wkp/assets/js/17896441.bd7294b6.js" as="script">
<link rel="preload" href="/wkp/assets/js/28b78683.e41a2416.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/wkp/"><img src="/wkp/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/wkp/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">WKP Docs</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wkp/docs/">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wkp/docs/deploying-wkp/hosts">Install</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wkp/docs/tasks/using-the-eks-d-distribution">Tasks</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wkp/docs/cluster-operations/user-workloads">Cluster Operations</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/wkp/docs/next/">main</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/wkp/docs/next/getting-started/known-issues">main</a></li><li><a class="dropdown__link" href="/wkp/docs/getting-started/known-issues">2.4.2</a></li></ul></div><a href="https://github.com/weaveworks/wkp-docs/tree/main" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/wkp/"><img src="/wkp/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/wkp/img/weave-logo.png" alt="WKP docs" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">WKP Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wkp/docs/">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wkp/docs/deploying-wkp/hosts">Install</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wkp/docs/tasks/using-the-eks-d-distribution">Tasks</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wkp/docs/cluster-operations/user-workloads">Cluster Operations</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/wkp/docs/next/getting-started/known-issues">main</a></li><li class="menu__list-item"><a class="menu__link" href="/wkp/docs/getting-started/known-issues">2.4.2</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/weaveworks/wkp-docs/tree/main" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wkp/docs/next/">Introduction to wk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wkp/docs/next/getting-started/wk">The wk command</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wkp/docs/next/getting-started/entitlements">Configuring Entitlements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wkp/docs/next/getting-started/git-config-repository">Managing the Git Configuration Repository</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/wkp/docs/next/getting-started/known-issues">Known Issues and Work Arounds</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deploying WKP</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/deploying-wkp/hosts">Cluster Node Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/deploying-wkp/cluster-creation-on-ssh-nodes">Creating Clusters on SSH Nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/deploying-wkp/components-on-existing-cluster">Install to an Existing Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/deploying-wkp/cluster-creation-on-eks">Installing WKP to EKS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/deploying-wkp/cluster-creation-on-ssh-nodes">Creating Clusters on SSH Nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/deploying-wkp/cluster-creation-on-footloose">Installing WKP on Footloose</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Multi-cluster Control Plane</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/mccp/intro">What is Multi-cluster Control Plane?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/mccp/database-configuration">Configuring a Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/mccp/usage-guide">Connecting Clusters</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Team Workspaces</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/team-workspaces/usage-guide">Implementing Team Workspaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/team-workspaces/team-permissions">Specifying Team Permissions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/team-workspaces/member-guide">Deploying Workloads</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cluster Operations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/cluster-operations/user-workloads">Running and Managing Workloads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/cluster-operations/adding-removing-nodes">Adding and Removing Nodes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/cluster-operations/upgrading-kubernetes-version">Upgrading Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/cluster-operations/custom-kubernetes-configuration">Customizing the API Server and Kubelet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/cluster-operations/auth">Securing the WKP UI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/cluster-operations/managing-secrets">Managing Secrets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/cluster-operations/sealing-key">Managing the Sealing Key</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Monitoring</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/monitoring/introduction">WKP Monitoring Tools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/monitoring/alerts">Alerts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/monitoring/dashboards">Dashboards</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tasks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/tasks/control-plane-load-balancers">Control Plane Load Balancing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/tasks/using-the-eks-d-distribution">Configuring EKS-D</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/tasks/multiple-cluster-admins">Specifying Multiple Admins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/tasks/patching-node-os-packages">Patching Node OS packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/tasks/profiling-kubectl">Profiling kubectl</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/troubleshooting/help">Debugging a Problem</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/troubleshooting/kubelet">Troubleshooting kubelet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/troubleshooting/controller">Troubleshooting wks-controller</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/troubleshooting/scope">WKP Scope</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/tasks/patching-node-os-packages">Patching Node OS packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/tasks/profiling-kubectl">Profiling kubectl</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/FAQ/faq">Frequently Asked Questions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/reference/reference">Cluster and Machine Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/reference/cluster">cluster.yaml</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/reference/machines">machines.yaml</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Thirdparty Dependencies</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wkp/docs/next/deps/dependencies">Third-party Dependencies</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for WKP Technical Documentation <strong>main</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/wkp/docs/getting-started/known-issues">latest version</a></strong> (2.4.2).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: main</span></div><header><h1 class="docTitle_3a4h">Known Issues and Work Arounds</h1></header><div class="markdown"><ul><li><p>Cluster creation with Kubernetes 1.16.1 fails. <strong>Avoid creating clusters on 1.16.1 and use a later version instead.</strong></p></li><li><p>Upgrading Kubernetes 1.19.1 to any of 1.19.2, 1.19.3 or 1.19.4 (the latest as of writing) fails. <strong>Avoid creating clusters on 1.19.1 and use a later version instead.</strong> <em>Please contact support if this is not an option.</em></p></li><li><p>Upgrading from Kubernetes 1.16.x to 1.17.x sometimes stalls. If after upgrading the first control plane node the upgrade process hangs you may be experiencing this issue. The kubelet logs of the stalled control plane node will show:</p><blockquote><p><code>KubeletNotReady Failed to initialize CSINodeInfo: error updating CSINode annotation: timed out waiting for the condition; caused by: the server could not find the requested resource</code></p></blockquote><p>A workaround to this could be editing the end of <code>/var/lib/kubelet/config.yaml</code> as follows on each of the stalled control plane nodes:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">featureGates:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  CSIMigration: false</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>More details can be found here: <a href="https://github.com/kubernetes/kubernetes/issues/86094" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/kubernetes/issues/86094</a></p></li><li><p>Docker Desktop for Mac requires specifying the service and pod CIDR blocks. See <a href="/wkp/docs/next/deploying-wkp/cluster-creation-on-footloose">Cluster creation on footloose</a>.</p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/weaveworks/wkp-docs/tree/main/docs/getting-started/known-issues.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/wkp/docs/next/getting-started/git-config-repository"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Managing the Git Configuration Repository</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/wkp/docs/next/deploying-wkp/hosts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cluster Node Requirements Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Support</h4><ul class="footer__items"><li class="footer__item"><a href="mailto:support@weave.works" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Weaveworks</div></div></div></footer></div>
<script src="/wkp/assets/js/styles.abc77443.js"></script>
<script src="/wkp/assets/js/runtime~main.1ecede88.js"></script>
<script src="/wkp/assets/js/main.d34c52c6.js"></script>
<script src="/wkp/assets/js/1.7b0384ce.js"></script>
<script src="/wkp/assets/js/2.e71b656c.js"></script>
<script src="/wkp/assets/js/98.cac1137d.js"></script>
<script src="/wkp/assets/js/100.a80eb3bc.js"></script>
<script src="/wkp/assets/js/935f2afb.d09144ed.js"></script>
<script src="/wkp/assets/js/17896441.bd7294b6.js"></script>
<script src="/wkp/assets/js/28b78683.e41a2416.js"></script>
</body>
</html>